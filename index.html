<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Periodic Table Trainer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      color: #333;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
    }
    input, button {
      font-size: 1rem;
      padding: 0.5rem;
      margin-top: 0.5rem;
    }
    #feedback {
      margin-top: 1rem;
      font-weight: bold;
    }
    fieldset {
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: #fff;
    }
  </style>
</head>
<body>
  <h1>Periodic Table Trainer</h1>
  <p>
    Welcome! Test your knowledge of element names and symbols. Website is fairly buggy, reload if the input box doesn't appear. Made by Vineet Petlur with ChatGPT-5 assistance. Please follow my GitHub at
    <a href="https://github.com/FractalGeometryMathematician" target="_blank" rel="noopener">https://github.com/FractalGeometryMathematician</a>.
  </p>

  <!-- Flexible setup -->
  <form id="settingsForm">
    <fieldset>
      <legend>Choose quiz mode:</legend>
      <label><input type="radio" name="mode" value="both" checked> Both (Name & Symbol)</label><br />
      <label><input type="radio" name="mode" value="nameToSymbol"> Full Name → Symbol</label><br />
      <label><input type="radio" name="mode" value="symbolToName"> Symbol → Full Name</label>
    </fieldset>

    <fieldset>
      <legend>Filter by atomic number range:</legend>
      <label>Min atomic number: <input type="number" id="minAtomic" value="1" min="1" max="118" /></label><br />
      <label>Max atomic number: <input type="number" id="maxAtomic" value="20" min="1" max="118" /></label>
    </fieldset>
  </form>

  <label for="rounds">How many rounds?</label>
  <input type="number" id="rounds" value="5" min="1" max="100" />
  <button id="startBtn" onclick="startGame()">Start Game</button>

  <div id="game" style="display:none;">
    <p id="question"></p>
    <input type="text" id="answer" placeholder="Type your answer" />
    <button id="submitBtn" onclick="submitAnswer()">Submit</button>
    <p id="feedback"></p>
    <p id="score"></p>
  </div>

  <script>
    const elements = [
      { num: 1, mass: 1.008, name: "HYDROGEN", symbol: "H" },
      { num: 2, mass: 4.00, name: "HELIUM", symbol: "He" },
      { num: 3, mass: 6.94, name: "LITHIUM", symbol: "Li" },
      { num: 4, mass: 9.01, name: "BERYLLIUM", symbol: "Be" },
      { num: 5, mass: 10.81, name: "BORON", symbol: "B" },
      { num: 6, mass: 12.01, name: "CARBON", symbol: "C" },
      { num: 7, mass: 14.00, name: "NITROGEN", symbol: "N" },
      { num: 8, mass: 16.00, name: "OXYGEN", symbol: "O" },
      { num: 9, mass: 19.00, name: "FLUORINE", symbol: "F" },
      { num: 10, mass: 20.180, name: "NEON", symbol: "Ne" },
      { num: 11, mass: 22.99, name: "SODIUM", symbol: "Na" },
      { num: 12, mass: 24.31, name: "MAGNESIUM", symbol: "Mg" },
      { num: 13, mass: 26.98, name: "ALUMINUM", symbol: "Al" },
      { num: 14, mass: 28.09, name: "SILICON", symbol: "Si" },
      { num: 15, mass: 30.97, name: "PHOSPHORUS", symbol: "P" },
      { num: 16, mass: 32.07, name: "SULFUR", symbol: "S" },
      { num: 17, mass: 35.45, name: "CHLORINE", symbol: "Cl" },
      { num: 18, mass: 39.9, name: "ARGON", symbol: "Ar" },
      { num: 19, mass: 39.10, name: "POTASSIUM", symbol: "K" },
      { num: 20, mass: 40.08, name: "CALCIUM", symbol: "Ca" }
      // Add more elements as needed
    ];

    let filteredElements = [];
    let currentElement = null;
    let currentMode = "both"; // both, nameToSymbol, symbolToName
    let totalRounds = 5;
    let currentRound = 0;
    let correct = 0;
    let wrong = 0;
    let isAskingSymbol = false;

    function startGame() {
      // Read mode from radio buttons
      const modeRadios = document.getElementsByName("mode");
      for (const radio of modeRadios) {
        if (radio.checked) {
          currentMode = radio.value;
          break;
        }
      }

      // Get atomic number filter values
      const minAtomic = parseInt(document.getElementById("minAtomic").value) || 1;
      const maxAtomic = parseInt(document.getElementById("maxAtomic").value) || 118;

      // Filter elements by atomic number range
      filteredElements = elements.filter(el => el.num >= minAtomic && el.num <= maxAtomic);
      if (filteredElements.length === 0) {
        alert("No elements found in that atomic number range.");
        return;
      }

      // Set rounds
      totalRounds = parseInt(document.getElementById("rounds").value) || 5;
      currentRound = 0;
      correct = 0;
      wrong = 0;

      // Hide settings form and start button, show game div
      document.getElementById("settingsForm").style.display = "none";
      document.getElementById("rounds").style.display = "none";
      const startBtn = document.getElementById("startBtn");
      startBtn.style.display = "none";

      document.getElementById("game").style.display = "block";

      nextQuestion();
    }

    function nextQuestion() {
      if (currentRound >= totalRounds) {
        // End of game
        document.getElementById("question").textContent = "Game over!";
        document.getElementById("feedback").textContent = `You got ${correct} right and ${wrong} wrong.`;

        // Hide answer input and submit button
        document.getElementById("answer").style.display = "none";
        document.getElementById("submitBtn").style.display = "none";

        // Show start again button
        const startBtn = document.getElementById("startBtn");
        startBtn.textContent = "Start Again";
        startBtn.style.display = "inline-block";

        // Show settings and rounds input again
        document.getElementById("settingsForm").style.display = "block";
        document.getElementById("rounds").style.display = "inline-block";

        return;
      }

      // Pick a random element from filtered list
      currentElement = filteredElements[Math.floor(Math.random() * filteredElements.length)];

      // Decide question type based on mode
      if (currentMode === "both") {
        isAskingSymbol = Math.random() < 0.5;
      } else if (currentMode === "nameToSymbol") {
        isAskingSymbol = true;
      } else {
        // symbolToName
        isAskingSymbol = false;
      }

      if (isAskingSymbol) {
        document.getElementById("question").innerHTML = `What is the <strong>symbol</strong> for ${currentElement.name}?`;
      } else {
        document.getElementById("question").innerHTML = `What is the <strong>name</strong> for symbol ${currentElement.symbol}?`;
      }

      // Reset input and feedback
      const answerInput = document.getElementById("answer");
      answerInput.style.display = "inline-block";
      answerInput.value = "";
      answerInput.focus();
      document.getElementById("feedback").textContent = "";

      updateScore();
    }

    function submitAnswer() {
      const answer = document.getElementById("answer").value.trim();
      let correctAnswer = isAskingSymbol ? currentElement.symbol : currentElement.name;

      if (answer.toLowerCase() === correctAnswer.toLowerCase()) {
        document.getElementById("feedback").textContent = "✅ Correct!";
        correct++;
      } else {
        document.getElementById("feedback").textContent = `❌ Wrong! Correct answer: ${correctAnswer}`;
        wrong++;
      }

      currentRound++;
      updateScore();

      // Wait a moment, then next question
      setTimeout(nextQuestion, 1000);
    }

    function updateScore() {
      document.getElementById("score").textContent = `Round ${currentRound + 1} of ${totalRounds}`;
    }
  </script>
</body>
</html>
